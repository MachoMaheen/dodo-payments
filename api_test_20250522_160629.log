=== API Testing Script for Dodo Payments ===
Log file: api_test_20250522_160629.log
[0;34mChecking API health...[0m
[0;32mAPI is healthy.[0m
[0;34mRequest: POST /api/users/register[0m
[0;32mResponse:[0m
{
  "id": "23989602-2729-4cfa-bc77-c8c616373f5a",
  "username": "testuser_1747910189",
  "email": "testuser_1747910189@example.com",
  "created_at": "2025-05-22T16:06:29.755279Z",
  "updated_at": "2025-05-22T16:06:29.755279Z"
}

{"id":"23989602-2729-4cfa-bc77-c8c616373f5a","username":"testuser_1747910189","email":"testuser_1747910189@example.com","created_at":"2025-05-22T16:06:29.755279Z","updated_at":"2025-05-22T16:06:29.755279Z"}
[0;34mRequest: POST /api/users/login[0m
[0;32mResponse:[0m
{
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIyMzk4OTYwMi0yNzI5LTRjZmEtYmM3Ny1jOGM2MTYzNzNmNWEiLCJleHAiOjE3NDgwMTYzOTAsImlhdCI6MTc0NzkyOTk5MH0.Bv0mxNEydSOZr-oHBovchzhHx2I-PLarxnGrtktT-mw",
  "token_type": "Bearer"
}

[0;32mToken: eyJ0eXAiOiJKV1Qi...[0m
[0;34mRequest: GET /api/users/profile[0m
[0;32mResponse:[0m
{
  "id": "23989602-2729-4cfa-bc77-c8c616373f5a",
  "username": "testuser_1747910189",
  "email": "testuser_1747910189@example.com",
  "created_at": "2025-05-22T16:06:29.755279Z",
  "updated_at": "2025-05-22T16:06:29.755279Z"
}

{"id":"23989602-2729-4cfa-bc77-c8c616373f5a","username":"testuser_1747910189","email":"testuser_1747910189@example.com","created_at":"2025-05-22T16:06:29.755279Z","updated_at":"2025-05-22T16:06:29.755279Z"}
[0;34mRequest: GET /api/accounts/balance[0m
[0;32mResponse:[0m
{
  "balance": 0,
  "currency": "USD"
}

{"balance":0.0,"currency":"USD"}
[0;34mRequest: POST /api/users/register[0m
[0;32mResponse:[0m
{
  "id": "597154ea-5e5c-436c-83c9-95b47c869a15",
  "username": "recipient_1747910189",
  "email": "recipient_1747910189@example.com",
  "created_at": "2025-05-22T16:06:30.640642Z",
  "updated_at": "2025-05-22T16:06:30.640642Z"
}

{"id":"597154ea-5e5c-436c-83c9-95b47c869a15","username":"recipient_1747910189","email":"recipient_1747910189@example.com","created_at":"2025-05-22T16:06:30.640642Z","updated_at":"2025-05-22T16:06:30.640642Z"}
[0;34mRequest: POST /api/users/login[0m
[0;32mResponse:[0m
{
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiI1OTcxNTRlYS01ZTVjLTQzNmMtODNjOS05NWI0N2M4NjlhMTUiLCJleHAiOjE3NDgwMTYzOTAsImlhdCI6MTc0NzkyOTk5MH0.KcADDenA-5Ef6w9QGvzxxoKGNUFALJ1040V0LD5Q5gE",
  "token_type": "Bearer"
}

[0;34mRequest: GET /api/users/profile[0m
[0;32mResponse:[0m
{
  "id": "597154ea-5e5c-436c-83c9-95b47c869a15",
  "username": "recipient_1747910189",
  "email": "recipient_1747910189@example.com",
  "created_at": "2025-05-22T16:06:30.640642Z",
  "updated_at": "2025-05-22T16:06:30.640642Z"
}

[0;34mRequest: POST /api/transactions[0m
[0;32mResponse:[0m
{
  "status": "error",
  "message": "Insufficient funds"
}

[0;34mRequest: GET /api/transactions[0m
[0;32mResponse:[0m
{
  "status": "error",
  "message": "Database error: column \"recipient_id\" does not exist"
}

{"status":"error","message":"Database error: column \"recipient_id\" does not exist"}
[0;34mRequest: GET /api/users/profile[0m
[0;31mInvalid JSON:[0m
Authentication error: Invalid token: Base64 error: Invalid last symbol 100, offset 6.

Authentication error: Invalid token: Base64 error: Invalid last symbol 100, offset 6.
[0;32mTest completed. Log saved to: api_test_20250522_160629.log[0m
